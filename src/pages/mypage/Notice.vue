<template>
    <div class="flex flex-col min-h-screen bg-white">
        <!-- 🔙 상단 뒤로가기 헤더 -->
        <BackHeader title="FAQ" />
        <!-- 전체 내용 스크롤 -->
        <div class="flex flex-col flex-1 mt-14">
            <!-- 📌 상단 설명 영역 -->
            <div class="w-full bg-[#E7ECF2] flex flex-col items-center py-8 text-center px-6">
                <div class="text-[40px]">🤔</div>
                <h1 class="text-[18px] font-bold mt-2 leading-tight">
                    청약 자주 하는 질문<br />
                    모아봤어요
                </h1>
            </div>

            <!-- 🔍 검색창 -->
            <div class="w-full px-5 py-4 bg-white sticky top-0 z-10">
                <div class="flex items-center px-4 py-2 bg-gray-100 rounded-full">
                    <svg
                        class="w-4 h-4 text-gray-400"
                        fill="none"
                        stroke="currentColor"
                        stroke-width="2"
                        viewBox="0 0 24 24"
                    >
                        <path
                            stroke-linecap="round"
                            stroke-linejoin="round"
                            d="M21 21l-4.35-4.35m0 0A7.5 7.5 0 104.5 4.5a7.5 7.5 0 0012.15 12.15z"
                        />
                    </svg>
                    <input
                        type="text"
                        class="ml-2 w-full bg-transparent outline-none text-sm"
                        placeholder="질문을 검색해보세요"
                        v-model="searchQuery"
                    />
                </div>
            </div>

            <!-- 질문 리스트 -->
            <div class="px-4 pb-20 pt-2" ref="scrollContainerRef">
                <div
                    v-for="({ id, title, content, isHtml }, index) in filteredFaqs"
                    :key="id"
                    class="w-full mb-1 border-b"
                    ref="scrollContainerRef"
                >
                    <div
                        class="flex justify-between items-center py-3 cursor-pointer"
                        @click="toggleDetail(id)"
                        :ref="(el) => setScrollRef(el, id)"
                    >
                        <p class="text-sm text-left font-medium">{{ title }}</p>
                        <ChevronRight :class="[isOpen(id) ? 'rotate-90' : '', 'transition']" />
                    </div>

                    <transition name="slide">
                        <div
                            v-show="isOpen(id)"
                            class="text-xs text-gray-600 leading-snug whitespace-pre-line pb-4"
                        >
                            <div v-if="isHtml" v-html="content"></div>
                            <div v-else>{{ content }}</div>
                        </div>
                    </transition>
                </div>
            </div>

            <BottomNavbar />
        </div>
    </div>
</template>

<script setup>
import { ref, computed, nextTick } from 'vue'
import { ChevronRight } from 'lucide-vue-next'
import BackHeader from '@/components/common/BackHeader.vue'
import BottomNavbar from '@/components/common/BottomNavbar.vue'

// 더미 데이터 (FAQ)
const faqs = ref([
    {
        id: 1,
        title: '청약가점제란 무엇인가요?',
        content: `- 청약 신청자의 3가지 조건에 따라 가산점을 부여하여 분양 주택의 당첨자를 결정하는 제도를 말합니다.
        
        - 청약 가점은 부양 가족수 5~35점, 무주택 기간 2~32점, 청약 통장 가입 기간 1~17점으로 최고 점수는 84점으로 합산하여 계산됩니다.
        
        - 부양 가족수는 1명이 늘 때마다 5점씩, 무주택 기간은 1년이 경과할 때마다 2점씩, 청약 통장 가입 기간은 1년이 경과할 때마다 1점씩 올라가는 식으로, 점수가 높을수록 청약에 유리한 방식입니다.
        
        - 청약 진단하기를 통해 한번에 내 점수를 확인해 보세요.`,
    },
    {
        id: 2,
        title: '공공분양 청약 1순위 자격조건은 무엇인가요?',
        content: `- 공공분양 청약 1순위 조건은 청약 통장 가입 기간과 납입 횟수가 중요해요.
        
        - 청약 통장 가입 기간 : 수도권 1년 이상, 비수도권 6개월 이상, 투기과열지구 및 청약과열지역 2년 이상
        
        - 납입 횟수 : 수도권 12회 이상, 비수도권 6회 이상, 투기과열지구 및 청약과열지역 24회 이상
        
        - 무주택 조건 : 투기과열지구 및 청약과열지역 무주택 세대주, 그 외 지역 무주택 세대주 또는 세대원
        
        - 내 청약 진단하기를 통해 지원 가능한 청약을 한 번에 확인해 보세요.`,
    },
    {
        id: 3,
        title: '민간분양 청약 1순위 자격조건은 무엇인가요?',
        content: `- 민간분양 청약 1순위 조건은 가입 기간과 주택 소유 조건, 그리고 예치 금액이 중요해요.
        
        - 청약 통장 가입 기간 : 수도권 1년 이상, 비수도권 6개월 이상, 투기과열지구 및 청약과열지역 2년 이상
        
        - 주택 소유 조건 : 세대원 전원이 1주택까지 소유하고 있어도 가능. 다만 세대원 전체 주택 수가 2주택 이상이면 1순위에서 제외. 투기과열지구 및 청약과열지역에서는 세대주만 청약 가능하며, 세대원 모두 과거 5년 이내에 청약 당첨 사실이 없어야 함
        
        - 청약통장 예치금액 기준 : 지역별로 예치금 기준이 다르며, 예치금 기준은 청약자의 주민등록상 거주지를 기준으로 적용됨 (예: 서울에 거주하면서 다른 지역의 아파트를 청약하는 경우 서울의 예치금 기준을 따름)
        
        - 내 청약 진단하기를 통해 지원 가능한 청약을 한 번에 확인해 보세요.`,
    },
    {
        id: 4,
        title: '무주택기간은 어떻게 산정하나요?',
        content: `- 무주택자에 대한 무주택 기간은 청약 신청자 본인 및 배우자를 기준으로 산정해요.
        • 혼인신고일 : 혼인신고서 제출한 날 
        • 무주택자가 된 날 : 건물 등기부등본 등기 접수일
        
        - 주택을 소유한 적이 없을 때
        • 만 30세 이전에 결혼한 청약 신청자 : 혼인신고일부터 ~ 입주자 모집 공고일까지  
        • 만 30세 이전에 결혼하지 않은 청약 신청자 : 만 30세부터 ~ 입주자 모집 공고일까지- 주택을 소유한 적이 있을 때  
        • 만 30세 이전에 결혼한 청약 신청자 : 혼인신고일과 무주택자가 된 날 중 늦은 날부터 ~ 입주자 모집 공고일까지  
        • 만 30세 이전에 결혼하지 않은 청약 신청자 : 만 30세가 된 날과 무주택자가 된 날 중 늦은 날부터 ~ 입주자 모집 공고일까지`,
    },
    {
        id: 5,
        title: '청약가점제에서 무주택자의 기준은 어떻게 되나요?',
        content: `- 공공분양의 무주택자 기준  
        • 세대원 포함 : 무주택자 기준이 세대주뿐만 아니라 세대원 모두에게 적용됩니다. 이는 배우자와 자녀를 포함한 모든 세대원이 무주택 상태여야 함을 의미합니다.  
        • 이전 주택 소유 이력 : 과거에 주택을 소유했던 이력도 중요하게 고려됩니다. 배우자가 결혼 전 주택을 소유했다가 처분했더라도, 청약 자격에 영향을 줄 수 있습니다.  
        • 직계존속의 주택 소유여부 : 부모나 배우자의 부모가 주택을 소유하고 있는 경우, 이는 무주택 세대 구성원으로 간주되지 않을 수 있습니다. 그러나 만 60세 이상의 직계존속이 소형저가주택을 소유한 경우에는 예외가 적용될 수 있습니다.
        
        - 민간분양의 무주택자 기준  
        • 세대 구성원의 주택 소유 여부 : 세대주뿐만 아니라 세대 구성원의 주택 소유 여부. 민간분양의 경우에도 배우자의 이전 주택 소유 이력이 청약 자격에 영향을 미칠 수 있음
        
        - 무주택자 기준은 일부 세부 사항에서 공공분양과 차이가 있을 수 있으므로, 구체적인 조건은 해당 분양 공고나 청약 안내에서 확인하는 것이 중요합니다. 청약을 신청하기 전에 해당 지역과 분양 유형에 맞는 무주택자 기준을 꼼꼼히 확인해 주세요!`,
    },
    {
        id: 6,
        title: '청약가점제에서 부양가족수의 기준은 어떻게 되나요?',
        content: `- 청약 신청자와 동일한 주민등록본에 기재된 세대원 중 아래의 경우에 해당해요.  
        • 배우자 : 동일한 주민등록표상에 등재되어 있지 않은 배우자 (분리세대)  
        • 직계존속 : 청약 신청자가 세대주여야 하며, 3년 이상 동일 주민등록본에 등재된 직계존속  
        • 직계비속 : 미혼 자녀(만 30세 이상 입주자모집공고일 기준으로 최근 1년 이상 계속해서 동일한 주민등록등본 상에 등재 시에만 부양가족으로 인정), 부모가 모두 사망한 경우 미혼인 손자녀 포함`,
    },
    {
        id: 7,
        title: '유주택자가 무주택 자격으로 청약을 넣을 수 있는 경우도 있나요?',
        content: `- 유주택자가 무주택 자격으로 청약을 넣을 수 있는 경우도 있어요.  
        • 청약 당첨 부적격자로 통보를 받은 날부터 3개월 이내에 상속받은 공유 지분을 처분한 경우(단, 단독 상속은 유주택자로 간주)  
        • 면의 행정구역(수도권 제외)의 사용 승인 후 20년 이상 경과 또는 85㎡ 이하 단독주택  
        • 주택 분양을 완료했거나, 청약 당첨 부적격자로 통보를 받은 날부터 3개월 이내 처분한 경우(개인에 한함)  
        • 근로자의 숙소 소유(개인에 한함)  
        • 1호 또는 1세대 20㎡ 이하의 주택 소유  
        • 만 60세 이상의 직계존속이 주택 소유  
        • 공부상 주택에 등재돼 있으나 주택 이외의 용도로 사용되고 있는 경우로 청약 당첨 적격자로 통보받은 날로부터 3개월 이내에 정리한 경우  
        • 무허가 건물 소유`,
    },
    {
        id: 8,
        title: '청약 점수가 낮아도 청약에 당첨될 수 있나요?',
        content: `- 청약 점수로 당첨자를 선정하는 가점제의 경우 각 지역마다 당첨 커트라인이 달라요. 일부 수도권 또는 청약과열지역이 아닌 지방에서는 청약 가점 커트라인이 35점 이하인 곳도 많으니, 지방에 거주하고 있다면 당첨 가능성이 있습니다.`,
    },
    {
        id: 9,
        title: '무순위 청약은 무엇인가요?',
        content: `- 무순위 청약은 다른 조건 없이 누구나 신청하고 추첨을 통해 당첨자를 선정하는 청약이에요.
        
        - '무순위 사후접수', '계약 취소주택 재공급', '임의 공급' 세 가지로 구분돼요.① 무순위 사후접수  
        • 만 19세 이상의 성인, 유주택/무주택 세대구성원  
        • 단, 공공주택 무순위 사후접수의 경우 무주택 세대구성원만 지원 가능  
        • 국내 거주인이라면 누구나 가능② 계약 취소주택 재공급  
        • 만 19세 이상의 성인, 무주택 세대구성원  
        • 특별공급 : 각 자격요건 충족자만 가능  
        • 일반공급 : 무주택 세대주만 가능③ 임의 공급  
        • 사업주체별 별도 요건 확인이 필요`,
    },

    {
        id: 10,
        title: '일반공급과 특별공급 차이가 뭔가요?',
        content: `- 특별공급은 정책적인 배려가 필요한 사람들에게 혜택을 주기 위해 제공하는 공급 방식이에요. 기존엔 신혼부부, 생애최초, 다자녀, 노부모 부양, 기관추천 이렇게 5개 유형이 있었는데, 최근 19~39세 미혼 청년을 대상한 유형도 추가했어요.
        
        - 특별공급은 평생 딱 한 번만 당첨될 수 있어요. 만약 세대원 중 1명이라도 특별공급으로 당첨된 이력이 있다면 다시 요건이 충족되더라도 특별공급을 신청할 수 없어요.
        
        - 특별공급은 일반공급과 중복해서 신청할 수도 있는데, 만약 특별공급에 해당하지 않는다면 일반공급으로만 청약할 수 있어요.`,
    },
    {
        id: 11,
        title: '민영주택·국민주택, 공공분양·민간분양 뭐가 다른가요?',
        content: `- 국민주택은 공공기관이 짓거나 공공기관의 도움으로 지어진 주택이에요. 국가와 지자체, LH와 지방공사가 건설하는 주택, 국가의 지원으로 건설 또는 개량하는 주택을 의미합니다. 여기에는 공공임대, 공공분양이 해당돼요.
        
        - 반면, 민영주택은 국민주택 외의 모든 주택이라고 보면 돼요. 일명 우리가 흔히 보는 브랜드 아파트들이 여기에 해당되는데요, 이런 브랜드 아파트를 짓는 기업들이 분양하는 것이 민간분양이라고 해요. 일부 민간기업이 참여했지만 공공분양된 주택도 있으니 참고해 주세요.
        
        - 여기서 중요한 점은 규모, 즉 집의 평수 차이가 있어요. 국민주택 규모는 주거 전용면적 85㎡ 이하, 수도권과 도시지역이 아닌 읍·면 지역은 100㎡ 이하로 제한돼요. 즉, 소규모 주택만 국민주택으로 분양되는 것이죠. 민영주택은 그 이상의 면적들도 청약이 가능해요.
        
        - 국민주택이든 민영주택이든, 종류에 따라 청약 자격과 조건, 선정 방식이 다르니 꼭 공고를 잘 확인해야 해요.`,
    },
    {
        id: 12,
        title: '청년주택드림청약통장은 무엇인가요?',
        content: `- 청년주택드림청약통장이란 특정 조건을 충족하는 19세에서 34세의 무주택 청년을 대상으로 하는 주택청약 상품이에요. 이 통장은 우대이율, 비과세 혜택, 그리고 소득공제 혜택을 제공하는데, 우대이율은 가입 기간에 따라 최대 4.5%까지 적용되며, 소득공제는 연 납입액의 40%까지 가능해요.
        
        - 기존에 다른 청약계좌를 가지고 있는 청년들은 2024년 2월부터 새로운 청약통장 출시 시점에 자동으로 전환되거나, 기존 청약저축 가입자의 경우 전환 신청을 할 수 있어요. 기존 통장에 납입한 기간·금액·납입 회차 등은 연속하여 인정되며, 이 통장은 우리·국민·농협·신한·하나·기업·부산·대구·경남은행 등에서 가입할 수 있어요.

        - 이 통장을 통해 주택 청약에 당첨되면 청년주택드림대출을 이용할 수 있으며, 결혼·첫 출산·추가 출산 등의 사건이 발생하면 추가 금리 혜택을 받을 수 있어요. 다만 이미 청약에 당첨된 경우에는 이 대출을 이용할 수 없으며, 대출 조건으로는 미혼일 경우 연소득 7,000만 원 이하, 기혼일 경우 부부 합산 연소득 1억 원 이하만 신청할 수 있어요.

        - 자세한 내용과 최신 정보는 국토교통부 홈페이지나 해당 은행에서 확인해주세요.`,
    },
    {
        id: 13,
        title: '신혼부부 특별공급은 무엇인가요?',
        content: `- 신혼부부 특별공급은 공공분양 및 민간분양에 해당하는 부부가 주택을 획득할 수 있도록 하는 제도예요. 특정 조건을 충족하는 신혼부부에게 주택을 우선적으로 할당해 주는 것이죠. 일반 청약자끼리 경쟁하는 것은 일반공급, 신혼부부끼리만 경쟁하는 것이 신혼부부 특별공급이에요.
        
        - 신혼부부 특별공급도 다른 특별공급과 마찬가지로 평생 단 한 번만 당첨될 수 있어요. 가구원 중 한 명이라도 특별공급으로 당첨된 이력이 있으면 다시 신청할 수 없지만, 일반공급과 중복 신청은 가능해요. 단, 일반공급 당첨 후 특별공급에 당첨되면 일반공급은 자동 취소됩니다.

        - 자격 조건  
        • 청약통장 가입기간 6개월 이상  
        • 입주자 모집 공고일 기준 결혼 7년 이내 신혼부부  
        • 혼인신고일부터 모집공고일까지 부부 모두 무주택 상태 유지  
        • (공공분양 한정) 예비 신혼부부·만 6세 이하 자녀 있는 한부모 가족도 신청 가능

        - 소득 조건  
        • 신청자의 월평균 소득이 전년도 도시근로자 1인 가구 월평균 소득의 140% 이하(맞벌이 160% 이하)

        - 2024년 추가 조건  
        • 2024년부터 공공분양에 신생아 특별공급이 신설되어, 모집공고일로부터 2년 내 임신·출산한 신혼부부도 신청 자격이 생겨요.

        - 자세한 내용은 청약 홈 홈페이지 [청약제도안내 > APT > 특별공급]에서 확인하세요.`,
    },
    {
        id: 14,
        title: '다자녀 특별공급은 무엇인가요?',
        content: `- 다자녀 특별공급 청약제도는 무주택 다자녀 가정을 대상으로 주택을 우선 공급하는 제도예요. 2024년부터 다자녀 가구의 개념이 ‘미성년인 자녀 2명 이상(태아 포함)’으로 확대되어 더 많은 가구가 신청할 수 있게 되었어요.
        
        - 대상자  
        • 입주자 모집 공고일 기준 미성년 자녀 2명 이상을 둔 자(태아·입양자녀 포함)  
        • (국민주택 한정) 예비 신혼부부도 포함 가능(혼인 계획 중이며, 입주 전까지 혼인사실 증명)
        
        - 자격 조건  
        • 동일 주민등록상 세대주 및 세대원 전원이 무주택  
        • 국민주택의 경우 세대 월평균 소득이 전년도 도시근로자 1인 가구 소득의 120% 이하(민영주택은 소득기준 미적용)  
        • 청약저축 가입 후 6개월 경과 및 매월 약정 납입일에 월납입금 6회 이상 납입  • 당첨자 발표일 기준 1세대당 1인 신청
        
        - 배점  
        • 자녀 수에 따라 총 40점 배점(2명 25점·3명 35점·4명 이상 40점)
        
        - 자세한 내용은 청약 홈 홈페이지 [청약제도안내 > APT > 특별공급]에서 확인하세요.`,
    },
    {
        id: 15,
        title: '노부모부양 특별공급은 무엇인가요?',
        content: `무주택 세대로서 배우자와 직계존속을 포함해 만 65세 이상의 직계존속을 3년 이상 부양하고 있다면 신청할 수 있는 제도예요. 단, 신청자와 노부모 모두 무주택자이어야 해요.

대상자
• 일반공급 1순위에 해당하는 자로서 만 65세 이상의 직계존속을 3년 이상 계속하여 부양(같은 주민등록등본 등재)하고 있는 세대주
• 무주택 세대주만이 신청 가능

자격 조건
• 1순위 세대주만 청약 가능
• 동일 주민등록본 상 세대주 및 세대원 전원이 무주택인 경우
• 해당 세대의 월평균 소득이 전년도 도시근로자 가구당 월평균 소득의 120% 이하인 분
• 주택별 청약 가능한 청약통장에 가입한 지 24개월(지역 및 주택에 따라 6~24개월)이 경과하고 매월 약정 납입일에 월 납입금을 24회(지역에 따라 6~24회) 이상 납입한 분
• 당첨자 발표일이 동일한 주택에 대하여 1세대당 1인 신청 가능
• 수도권 이외의 지역은 6 ~ 12개월 기간으로 시/도지사가 정하는 기간을 충족하는 경우`,
    },
    {
        id: 16,
        title: '생애최초 특별공급은 무엇인가요?',
        content: `말 그대로 살아있는 동안 단 한 번 가능한 특별공급 제도로, 생애 처음으로 본인 명의의 주택을 구입할 수 있도록 혜택을 주는 것이에요. 세대주 및 세대 구성원 모두 과거에 주택을 소유한 이력이 없어야 해요.

자격 조건
• 청약통장 가입 24개월 이상. 단, 세부 기준은 지역과 주택에 따라 조금씩 상이
• 청약 예금의 경우는 1순위자로 지역별 신청 가능한 예치금액 이상을 납부 완료한 상태이어야 하며, 청약 부금의 경우 1순위자이면서 매월 납입한 약정 금액의 총액이 지역별 신청 가능 예치금 이상이어야 함
• 국민주택은 청약통장 가입 24개월 이상. 주택청약 종합 저축은 1순위자로 약정 납입 횟수 24회 이상 이력이 있어야 하며 선납금을 포함한 예치금이 600만 원 이상인 경우 가능`,
    },
    {
        id: 17,
        title: '생애최초 특별공급 대상자는 누구인가요?',
        content: `■ 민영주택
• 입주자 모집 공고일 기준으로 과거 주택을 소유한 사실이 없는 자
• 혼인 중이거나 미혼인 자녀가 있는 경우
• 입주자 모집 공고일 기준으로 근로자 혹은 자영업자로서 5년 이상 소득세를 납부한 사실이 확인되는 자
• 입주자 모집 공고일 현재 이혼 및 사별 등으로 혼인 중이 아니거나 미혼 자녀가 없는 1인 가구에 해당하는 경우에는 30% 물량이 배정되는 추첨제로 신청이 가능함
• 1인 가구 중 단독 세대주가 아닌 경우, 모든 주택형을 신청할 수 있지만 단독 세대주에 해당한다면 60㎡ 이하의 주택형만 신청할 수 있음

■ 국민주택
• 혼인 중이거나 미혼인 자녀가 있는 경우
• 입주자 모집 공고일 기준으로 근로자 혹은 자영업자로서 5년 이상 소득세를 납부한 사실이 확인되는 경우
• 투기과열지구와 청약과열지구의 경우 과거 5년 이내에 다른 주택에 특별공급이 당첨된 사실이 있거나, 당첨자의 세대원으로 속한 경우에는 신청이 불가
• 입주자 모집 공고일 현재를 기준으로 일반공급 1순위 무주택 세대주와 세대 구성원으로 주택청약저축액의 선납금까지 포함해 600만원 원 이상인 경우

자세한 내용은 청약 홈 홈페이지에 접속 후 [청약제도 안내]에서 확인해 보세요.`,
    },
    {
        id: 18,
        title: '생애최초 특별공급 소득기준은 무엇인가요?',
        isHtml: true, // 테이블 표시
        content: `
<p>민영주택과 국민주택의 경우는 소득 기준을 초과해도 자산기준을 충족하면 신청하도록 완화 되었어요.<br>
공공주택의 경우 소득기준과 자산기준 모두를 만족해야 해요.</p>
<p style="color: #888; margin-top: 8px;">※ 생애최초 특별공급 소득기준</p>
<table style="width:100%; border-collapse:collapse; margin:12px 0;">
    <thead>
        <tr style="background:#F3F4F6;">
            <th style="padding:4px; border:1px solid #ddd;">구분</th>
            <th style="padding:4px; border:1px solid #ddd;">민영주택</th>
            <th style="padding:4px; border:1px solid #ddd;">국민주택</th>
            <th style="padding:4px; border:1px solid #ddd;">공공주택</th>
        </tr>
    </thead>
    <tbody>
        <tr>
            <td style="padding:4px; border:1px solid #ddd;">신생아 일반공급</td>
            <td style="padding:4px; border:1px solid #ddd;">130% 이하</td>
            <td style="padding:4px; border:1px solid #ddd;">100% 이하</td>
            <td style="padding:4px; border:1px solid #ddd;">-</td>
        </tr>
        <tr>
            <td style="padding:4px; border:1px solid #ddd;">신생아 우선공급</td>
            <td style="padding:4px; border:1px solid #ddd;">130% 초과 160% 이하</td>
            <td style="padding:4px; border:1px solid #ddd;">100% 초과 130% 이하</td>
            <td style="padding:4px; border:1px solid #ddd;">-</td>
        </tr>
        <tr>
            <td style="padding:4px; border:1px solid #ddd;">우선공급</td>
            <td style="padding:4px; border:1px solid #ddd;">130% 이하</td>
            <td style="padding:4px; border:1px solid #ddd;">100% 이하</td>
            <td style="padding:4px; border:1px solid #ddd;">100% 이하 (맞벌이는 120%)</td>
        </tr>
        <tr>
            <td style="padding:4px; border:1px solid #ddd;">일반공급</td>
            <td style="padding:4px; border:1px solid #ddd;">130% 초과 160% 이하</td>
            <td style="padding:4px; border:1px solid #ddd;">100% 초과 130% 이하</td>
            <td style="padding:4px; border:1px solid #ddd;">100% 초과 130% 이하 (맞벌이는 120% 초과 140% 이하)</td>
        </tr>
        <tr>
            <td style="padding:4px; border:1px solid #ddd;">추첨공급<br>(혼인 중이거나 미혼자녀가 있는 경우)</td>
            <td style="padding:4px; border:1px solid #ddd;">160% 초과하거나,<br>자산 기준 충족</td>
            <td style="padding:4px; border:1px solid #ddd;">130% 초과하거나,<br>자산 기준 충족</td>
            <td style="padding:4px; border:1px solid #ddd;">140% 초과 200% 이하 (맞벌이만 가능)</td>
        </tr>
        <tr>
            <td style="padding:4px; border:1px solid #ddd;">1인 가구</td>
            <td style="padding:4px; border:1px solid #ddd;">160% 이하 (또는 자산 기준 충족)</td>
            <td style="padding:4px; border:1px solid #ddd;">130% 이하 (또는 자산 기준 충족)</td>
            <td style="padding:4px; border:1px solid #ddd;">130% 이하 (또는 자산 기준 충족)</td>
        </tr>
    </tbody>
</table>
`,
    },
    {
        id: 19,
        title: '생애최초 특별공급 1인 가구는 뭐가 다른가요?',
        content: `민간 분양에서 생애 최초 특별공급 신청 자격을 갖출 수 있는 1인 가구는 '다른 세대 구성원 없이 혼자 거주중인 사람이자, 혼인 중이 아니며 미혼인 자녀가 없어야 한다'라는 의미예요. 미혼은 결혼을 하지 않았거나 이혼과 사별 등으로 배우자가 없는 상태를 모두 포함하며, 여기에 자녀 또한 동일한 주소에 함께 거주하지 않거나 없어야만 1인 가구로 인정돼요.

자격 요건은 단독 세대인 경우와 단독 세대가 아닌 경우 두 가지로 구분되는데, 단독세대 신청자는 전용면적 60㎡(공급면적 24평, 실평수 18평) 이하 주택형만 청약 신청이 가능하며 단독세대가 아닌 자는 85㎡(공급면적 33평, 실평수 25평) 이하 주택형에 청약할 수 있어요.`,
    },
    {
        id: 20,
        title: '기관추천 특별공급은 무엇인가요?',
        content: `추천 기관의 장으로부터 추천을 받으면 신청할 수 있는 제도예요. 자격 요건을 갖춘다면 기관에 신청을 하고, 기관에서는 대상을 선정합니다. 기관의 해당 지역에 거주하는 사람에게 우선순위를 주기도 하고, 기관장이 순위를 정해 선정해요.

• 대상주택: 전용면적 85㎡ 이하의 분양주택
• 한부모가족, 국군포로, 위안부피해자, 철거주택세입자 기관추천 경우 공공임대 주택
• 대상자: 국가유공자, 보훈대상자, 5.18 유공자, 특수임무유공자, 참전유공자, 장기복무(제대) 군인, 북한이탈주민, 납북피해자, 일본군위안부, 장애인, 영구귀국과학자, 올림픽 등 입상자, 중소기업근무자, 공공사업 등 철거주택 소유자 또는 거주자, 의사상자 등

자격 조건
• 동일 주민등록본 상 세대주 및 세대원 전원이 무주택인 경우
• 청약저축에 가입하여 6개월 경과 후 매월 약정 납입일에 월 납입금 6회 이상 납입한 경우
• 당첨자 발표일이 동일한 주택에 대하여 1세대당 1인 신청 가능
• 국가유공자나 장애인은 청약통장 없어도 신청 가능

자세한 내용은 청약 홈 홈페이지에 접속 후 [청약제도 안내 > APT > 특별공급]에서 확인해 보세요.`,
    },
    {
        id: 21,
        title: '주택청약 당첨이 어떤 경우에 취소되나요?',
        content: `청약 가점을 잘못 계산해서 당첨 무효가 되는 경우

청약 당첨자 발표일이 같은 경우 이중당첨으로 당첨 취소

청약에 당첨되었으나 계약을 하지 않은 경우

재당첨 제한 기간에 청약한 경우

청약 신청 시 제출한 서류가 사실과 다름이 판명된 경우

주민등록법령 위반, 청약 관련서류 변조 및 도용, 공급 신청서 기재사항 허위 및 청약통장 등을 타인명의로 가입한 자의 청약통장 등을 사실상 양도받아 주택공급신청 및 계약한 경우`,
    },
    {
        id: 22,
        title: '왜 무주택자가 유주택자보다 청약 시 더 유리한가요?',
        content: `청약 제도가 개편되어 투기과열지구, 조정 대상 지역 민영주택에서는 추첨제로 입주자를 선정할 때 추첨 대상 주택의 과반수 이상의 물량이 무주택자에게 우선 공급됩니다. 실수요층인 무주택자에게 우선 공급이 확대되므로 이 점을 잘 활용하면 좋아요.`,
    },
    {
        id: 23,
        title: '특별공급 자격을 갖추고 있는데 청약 시 유리할까요?',
        content: `공공 분양 물량의 대부분은 특별공급 자격을 갖춘 무주택자에게 돌아가므로 특별공급 대상자는 공공분양이 민간분양 아파트보다 더 유리해요.`,
    },
    {
        id: 24,
        title: '청약 당첨의 가점제와 추첨제 비율은 어떻게 되나요?',
        content: `당첨자 선정방식에는 민영주택 및 민간건설 중형국민주택의 입주자 선정방식에는 가점제와 추첨제가 있습니다. 가점제, 추첨제 비율을 확인하여 자신에게 더 좋은 기회가 될 분양 단지를 파악해야 해요.

• 85㎡이하 주택의 수도권 공공택지와 투기과열지구는 가점제 100%, 청약과열지역(조정대상지역)은 가점제 75% 추첨제 25%, 기타 지역은 지자체가 가점제 40% 이하에서 결정돼요.
• 85㎡초과 주택의 수도권 공공택지는 지자체가 가점제 50% 이하에서 결정하고 투기과열지구는 가점제 50% 추첨제 50%예요.
• 청약과열지역(조정대상지역)은 가점제 30% 추첨제 70%, 기타 지역은 추첨제 100%로 선발돼요.`,
    },
    {
        id: 25,
        title: '투기지역, 투기과열지구, 조정대상지역으로 지정된 곳은 어디인가요?',
        content: `투기지역 (4곳)• 서울특별시: 강남구, 서초구, 송파구, 용산구`,
    },
    {
        id: 26,
        title: '분양권 전매 제한이란 무엇인가요?',
        content: `아파트가 완공 되었을 때 입주할 수 있는 권리를 분양권이라 하고, 이 분양권을 입주 전, 잔금 치르기 전에 다른 사람에게 파는 것을 ‘분양권 전매’라고 해요. 정부에서는 분양권 전매를 이용한 투기를 막기 위해 분양권 전매 제한을 시행하고 있어요.`,
    },
    {
        id: 27,
        title: '분양가 상한제란 무엇인가요?',
        content: `집값 안정을 위한 제도로 주택을 분양할 때 택지비와 건축비에 건설업체의 적정 이윤을 보탠 분양가격을 산정하여 그 가격 이하로 분양하도록 정한 것이에요.`,
    },
    {
        id: 28,
        title: '재당첨 제한 가족 범위는 어떻게 되나요?',
        content: `당첨 경력이 있는 당첨자 및 당첨자와 동일한 주민등록등본에 등재된 세대원에게 당첨 기회를 제한하고 있어요. 여기서 세대원은 배우자, 직계존속, 직계비속, 배우자의 직계존속이 그 범위에 들어가요.`,
    },
    {
        id: 29,
        title: '오피스텔을 소유하고 있으면 유주택자가 되나요?',
        content: `등기부등본으로 주택인지 아닌지를 판단하기 때문에 등기부등본을 출력하여 용도란에 업무시설(오피스텔)로 표기되어 있다면 주거용, 업무용 구분 없이 무주택으로 간주되어 청약이 가능해요. 다만, 공공분양의 경우 특별분양 또는 60제곱미터 이하 분양 시에는 오피스텔이 자산보유기준에는 포함되니 평형이 중요해요.

도시형 생활주택은 주택을 소유한 것으로 해당됩니다. 건축물대장상의 용도를 확인하여 오피스텔인지 도시형 생활주택인지를 확인해야 해요. 또한, 도시형 생활주택 중 전용면적이 20제곱미터 이하인 경우는 무주택으로 간주되니 참고해 주세요.`,
    },
])

// 검색어
const searchQuery = ref('')

// 스크롤
const scrollRef = ref({})
const scrollContainerRef = ref(null)

// 열림 상태 관리
const openedId = ref(null)
const toggleDetail = (id) => {
    openedId.value = openedId.value === id ? null : id
    if (openedId.value) {
        nextTick(() => {
            setTimeout(() => {
                const target = scrollRef.value[id]
                if (target) {
                    // 간단하게 해당 요소로 스크롤하되 상단에서 70px 여백 두기
                    const rect = target.getBoundingClientRect()
                    const scrollTop =
                        window.pageYOffset ||
                        document.documentElement.scrollTop ||
                        document.body.scrollTop
                    const targetY = rect.top + scrollTop - 120

                    window.scrollTo({
                        top: targetY,
                        behavior: 'smooth',
                    })
                }
            }, 200) // 콘텐츠가 완전히 펼쳐질 때까지 충분한 대기
        })
    }
}
const isOpen = (id) => openedId.value === id

// 검색 필터
const filteredFaqs = computed(() =>
    faqs.value.filter((item) => item.title.includes(searchQuery.value)),
)

function setScrollRef(el, id) {
    if (!scrollRef.value) scrollRef.value = {}
    scrollRef.value[id] = el
}
</script>

<style scoped>
.slide-enter-active,
.slide-leave-active {
    transition:
        max-height 0.3s ease,
        opacity 0.3s ease;
}
.slide-enter-from,
.slide-leave-to {
    max-height: 0;
    opacity: 0;
}
.slide-enter-to,
.slide-leave-from {
    max-height: 500px;
    opacity: 1;
}
.faq-answer {
    padding-bottom: 1rem;
}
</style>
